/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Minimal test config for quick validation
    Skips optional QC steps to focus on core functionality
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

process {
    resourceLimits = [
        cpus: 4,
        memory: '6.GB',
        time: '1.h'
    ]

    // Reduce memory for specific processes
    withName: '.*:QUANTIFY_SCRNA_ISOQUANT:SPLIT_FASTA' {
        memory = '4.GB'
    }

    withName: '.*:QUANTIFY_SCRNA_ISOQUANT:SAMTOOLS_FAIDX_SPLIT' {
        memory = '2.GB'
    }

    withLabel:process_low {
        memory = '3.GB'
    }

    withName: '.*:FASTQC' {
        memory = '2.GB'
    }

    withName: '.*:NANOPLOT' {
        memory = '2.GB'
    }
}

params {
    config_profile_name        = 'Minimal test profile - Long-read'
    config_profile_description = 'Minimal test focusing on core pipeline functionality'

    // Input type
    input_type                  = 'long_read'

    // Input data
    input                       = "${projectDir}/test_data/longread/samplesheet_longread.csv"

    // Genome references
    genome_fasta                = "https://raw.githubusercontent.com/nf-core/test-datasets/scnanoseq/reference/chr21.fa"
    gtf                         = "https://raw.githubusercontent.com/nf-core/test-datasets/scnanoseq/reference/chr21.gtf"

    // Barcode options
    barcode_format              = "10X_3v3"

    // Analysis options
    quantifier                  = "isoquant"

    // Skip optional steps for faster, more reliable testing
    skip_seurat                 = true
    skip_multiqc                = true
    skip_dedup                  = false
    skip_trimming               = true
    skip_nanoplot               = true      // Skip NanoPlot
    skip_toulligqc              = true      // Skip ToulligQC
    skip_fastq_nanocomp         = true      // Skip NanoComp on FASTQ
    skip_bam_nanocomp           = true      // Skip NanoComp on BAM
    skip_rseqc                  = true      // Skip RSeQC
    skip_fastqc                 = false     // Keep FastQC as it's more reliable
}
